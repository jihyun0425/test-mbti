<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta
            name="description"
            content="ë‚´ ì„±ê²©ì„ ì•Œì•„ë³´ëŠ” 10ì´ˆ MBTI"
    />
    <meta name="og:image" content="./src/images/op_image.png" />
    <title>ë‚´ ì„±ê²©ì„ ì•Œì•„ë³´ëŠ” 10ì´ˆ MBTI</title>
    <script src="./js/personalTest.js"></script>
    <link rel="stylesheet" href="./css/style.css" />
</head>
<body>

<div class="personalTest_container" style="background: url('./src/images/bg.png') center no-repeat">
    <div class="intro_container content_container">
        <img src="./src/images/main.jpg" alt="">
        <h1>ë‚´ ì„±ê²©ì„ ì•Œì•„ë³´ëŠ” <span class="point_text">10ì´ˆ MBTI</span></h1>
        <button class="start" type="button" data-action="start">ì‹œì‘í•˜ê¸°</button>
    </div>
    <div class="test_container content_container">
        <h2>
            <span class="progress point_text">0</span>
            <span class="question">ì§ˆë¬¸</span>
        </h2>
        <div class="answer_container">
            <button class="answer" type="button" data-answer="a">ë‹µë³€ A</button>
            <button class="answer" type="button" data-answer="b">ë‹µë³€ B</button>
        </div>
    </div>
    <div class="result_container content_container">
        <h2 class="result_text">ë‹¹ì‹ ì˜ ì„±í–¥ì€ OOOì…ë‹ˆë‹¤.</h2>
        <h3 class="result_infor_title"></h3>
        <ul class="result_infor"></ul>
        <button class="restart" type="button" data-action="restart" style="margin-bottom: 30px;">ë‹¤ì‹œí•˜ê¸°</button>

        <form id="info_form" style="display: flex; flex-direction: column; align-items: center">
        <p style="font-size: 0.8rem; color: #ee7227">ë” ë§ì€ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆì–´ìš”ğŸ˜Š</p>
        <div class="info" style="padding-bottom: 20px; display: flex; flex-direction: column; align-items: center;">
            <input type="text" id="name" name="name" placeholder="ì´ë¦„" style="padding: 10px; color: black; margin-bottom: 10px;">
            <input type="text" id="phone" name="phone" placeholder="ë²ˆí˜¸" style="padding: 10px; color: black; margin-bottom: 10px;">
        </div>
        <button type="submit" style="padding: 10px 20px; background-color: #ef6532;
                                     border: none; cursor: pointer; font-size: 1rem;
                                     border-radius: 5px; color: #fff;" >
            ì œì¶œí•˜ê¸°</button>
        </form>
    </div>


</div>



<script>
    const personalTest = new PersonalTest('.personalTest_container');
</script>

<script>

    // ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
    function loadStoredData() {
        const storedName = localStorage.getItem('name');
        const storedPhone = localStorage.getItem('phone');

        // ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ ê°€ëŠ¥
        if (storedName && storedPhone) {
            // ì €ì¥ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤Œ
            console.log(`ì €ì¥ëœ ì´ë¦„: ${storedName}\nì €ì¥ëœ ì „í™”ë²ˆí˜¸: ${storedPhone}`);
        } else {
            console.log('ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
    window.addEventListener('load', loadStoredData);

    // í¼ ì œì¶œ ì‹œ ë°ì´í„°ë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
    function handleFormSubmit(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const name = formData.get('name');
        const phone = formData.get('phone');

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
        localStorage.setItem('name', name);
        localStorage.setItem('phone', phone);

        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
        const data = `ì´ë¦„: ${name}, ì „í™”ë²ˆí˜¸: ${phone}`;
        const file = new Blob([data], { type: 'text/plain' });
        const downloadLink = document.createElement('a'); // <a> ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        downloadLink.href = URL.createObjectURL(file);
        downloadLink.download = 'personal_info.txt'; // íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹œ íŒŒì¼ëª… ì§€ì •
        document.body.appendChild(downloadLink); // <a> ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ bodyì— ì¶”ê°€
        downloadLink.click(); // í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ
        document.body.removeChild(downloadLink); // <a> ì—˜ë¦¬ë¨¼íŠ¸ ì œê±°
    }

    // í¼ ì œì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
    const infoForm = document.querySelector('#info_form');
    infoForm.addEventListener('submit', handleFormSubmit);

    // ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘
    const restartButton = document.querySelector('.restart');
    restartButton.addEventListener('click', () => {
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ì‚­ì œ
        localStorage.removeItem('name');
        localStorage.removeItem('phone');
        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
        document.getElementById('name').value = '';
        document.getElementById('phone').value = '';
        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë§í¬ ìˆ¨ê¸°ê¸°
        // íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•´ ì¶”ê°€í–ˆë˜ <a> ì—˜ë¦¬ë¨¼íŠ¸ ì œê±°
        const downloadLink = document.querySelector('#downloadLink');
        if (downloadLink) {
            document.body.removeChild(downloadLink);
        }
    });

</script>
</body>
</html>
